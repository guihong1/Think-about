## 文件上传以及题目生成模块

首先由 一个currentStep 属性进行不同步骤显示区域的判断
等于1时 显示文件上传区域
等于2时 显示题目生成配置区域
等于3时 显示生成的题目

### 文件上传
这里有两种上传方式：
 1.拖拽文件上传
 2.点击按钮去选择文件上传

#### 拖拽文件上传
 这里设置了一个div区域块，并且设置了相关的属性
 @dragover.prevent：防止浏览器默认行为（否则拖进来的文件不会触发 drop）。
 @dragenter.prevent：用户拖进区域时高亮。
 @drop="handleFileDrop"：当用户释放鼠标，执行处理函数。

 handleFileDrop的作用是：
 处理文件拖拽，首先阻止浏览器默认的事件行为(默认打开文件)，然后改变IsDragging的值（用于调整css样式） 再将文件（e.dataTransfer.files）转化为数组，最后执行addFiles函数

 addFiles的作用：
 首先将传入的文件进行过滤操作，剔除其他格式的文件，加入剔除后的文件数量和剔除前的不一样，则提示用户。然后将剔除后的文件进行结构，赋值给uploadedFiles
 这里还自动将题库名称默认设置为第一个文件的名称。
#### 点击按钮上传文件
  点击按钮上传文件，这里设置了一个input标签，设置了type为file，并且设置了@change事件，当用户选择文件后，执行handleFileSelect函数。
  handleFileSelect的作用：
  处理文件选择，然后将文件转化为数组，最后执行addFiles函数。
  这里的addFiles函数和拖拽上传的addFiles函数一样，都是用于处理文件的函数。

#### 已上传文件列表展示
这里使用了v-if进行判断uploadedFiles长度是否大于0，进行模块的显示
大于0的话，则进行v-for遍历文件数组，将文件的名字，大小（文件大小调用函数进行格式化处理），删除按钮显示出来。最后就是下一步按钮点击。
点击按钮调用函数
nextStep：增加当前currentStep的值，进行下一个模块的渲染显示。
删除按钮：调用removeFile根据当前项的index值进行删除操作
格式化文件大小：将文件的大小进行格式转化

### 设置参数模块
这里有4个地方需要设置
1.题库名称以及描述 绑定了参数bankname 以及bankDescription
2.题目类型选择：
   首先会去遍历题目类型的数组，然后是一个复选框，绑定了selectedTypes数组，对于勾选的题目类型，会将类型的value值加入到数组中。
3.题目数量：
   这里会去遍历selectedTypes数组，然后针对每种题型进行遍历，添加按钮进行题型数量的增加和减少

4.难度设置：
  首先这里会遍历difficulty这个对象，里面有3种难度(简单，中等，困难)
  针对这3种难度会有3个滑块，最小值为0，最大值为100，滑动滑块对difficulty对象（key：难度 value：数字）进行数字修改。也就是修改这些题目的难度分布系数

#### 生成题库按钮
点击按钮调用函数 generateQuestions
  这里是一个异步操作，首先会去判断uploadedFiles是否存在，不存在则提示用户。然后将currentStep的值设置为3，将生成题库的模块渲染出来，然后改变生成状态为true，让其进行产生“生成中"这个效果。
  执行生成操作：
  1.先创建一个questionConfig题目配置对象，将选择的题目类型，题目数量，题目难度分布传入。
  2.进行AI配置检查，这里去拿到aiStore.config里面的配置对象
   2.1:假如是mock的话，则进行模拟生成，将题目配置对象传入aiService里面的generateMockQuestions这个方法。  这个方法先将题目配置对象进行解构，然后创建一个question数组，遍历选择的题目类型，为每个类型的题目调用难度划分函数，再结合创建问题的函数将类型，难度，数量传入。返回一个问题集合。
   2.2：假如是真实AI生成的话，则先更新AI服务配置，然后调用aiService.generateQuestions方法，传入题目配置对象。
   2.3：生成完成后，将生成状态设置为false，并且将生成的题目列表渲染出来。


### 生成题库

这里根据生成状态进行生成进度的模块渲染

生成结果预览：
 遍历generatedQuestions数组，
  对于每个问题，渲染出问题类型，问题内容，选项，正确答案。
  这里还有编辑模式，点击编辑按钮可以对问题进行编辑，包括修改类型，内容，选项，正确答案。采用了一个editingIndex 以及当前的index进行模块的显示，假如相等则进入编辑模式。对于每个question对象可以进行修改，当然也涉及保存和取消。
  保存的实现就是：在点击编辑问题时会调用一个函数，该函数首先会将editingIndex的值改成当前编辑的值，这里就会变成一个编辑状态，然后将当前question对象进行拷贝，将其赋值给editForm这个临时对象。点击保存按钮的时候，会去调用saveQuestion函数，将临时对象的值替换问题集合中这个对象的值，然后改变editingIndex使得编辑样式发生改变，最后将临时对象置空就行，点击取消按钮的话，只需要改变编辑样式就行，也就是改变editingIndex的值即可



  *这里的题库预览，涉及题目列表的展示，可待优化*

最后还有重新生成按钮、添加题目按钮、上一步、导入题库

重新生成：调用regenerateQuestions函数，这个函数会去调用generateQuestions函数，重新生成题目。

添加题目：
  点击添加题目按钮，会调用addQuestion函数，这个函数会创建一个新的空问题对象，并将其添加到generatedQuestions数组中。

上一步：将currentStep的值--即可

导入题库：调用importQuestions函数，这个函数会去使用questionStore里面的addQurstionBank，进行题库的添加，也就是公共的state里面有个属性为questionBanks的数组，将该对象添加进行即可。

继续导入：
  点击继续导入按钮，会调用continueImport函数，关闭提示框，并且将之前的currentStep、uplodaedFiles...响应式数据进行重置，该清空清空，该重置对象就重置对象。
  










