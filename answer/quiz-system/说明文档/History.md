## 答题历史页面模块

这个模块是整个答题系统的历史记录中心，负责展示用户的答题历史、统计数据和详细分析。通过这个页面，用户可以查看自己的答题轨迹、进步情况，以及对历史记录进行管理。

### 页面结构设计

整个页面采用自上而下的信息层级结构，从概览到详情，分为以下几个主要模块：

1. **页面标题区域**：提供明确的页面定位
2. **统计概览区域**：展示关键数据指标
3. **筛选和排序区域**：提供数据筛选功能
4. **历史记录列表**：展示详细的答题记录
5. **分页控制**：管理大量数据的展示
6. **空状态处理**：处理无数据情况

### 统计概览区域

这个区域使用网格布局（grid-cols-1 md:grid-cols-4）展示四个关键统计指标，每个指标都有醒目的数字和解释文本：

1. **总答题次数**：使用计算属性`totalQuizzes`统计历史记录总数
2. **平均分数**：使用计算属性`averageScore`计算所有答题的平均分
3. **累计答题数**：使用计算属性`totalQuestions`统计回答过的所有题目数量
4. **累计用时**：使用计算属性`totalTime`统计总答题时间，并智能转换为小时和分钟

这种设计的优势在于：
- 提供了宏观层面的成就感
- 使用不同颜色（蓝色、绿色、紫色、橙色）区分不同指标，增强视觉识别度
- 响应式布局确保在不同设备上都有良好的显示效果

### 筛选和排序功能

这个区域提供了强大的数据筛选和排序功能，帮助用户快速找到所需的历史记录：

#### 筛选功能
1. **题库筛选**：通过`filterBank`响应式变量和`availableBanks`计算属性，动态生成题库选择下拉框
2. **分数筛选**：通过`filterScore`变量提供分数段筛选（90分以上、80-89分等）

#### 排序功能
通过`sortBy`变量控制排序方式：
- 按时间排序（默认）
- 按分数排序
- 按题库名称排序

#### 清空历史功能
提供清空历史记录的功能，但会有二次确认提示，防止误操作。

这些功能的实现依赖于`filteredHistory`计算属性，它根据筛选条件和排序方式动态处理原始数据，确保UI展示的是经过处理的数据集。

### 历史记录列表

这是页面的核心展示区域，采用卡片式设计展示每条答题记录：

#### 卡片基本信息
每个卡片顶部展示：
- 题库名称
- 分数标签（根据分数显示不同颜色）
- 答题模式标签（练习/考试）

#### 卡片详细信息
使用网格布局展示四个关键信息：
- 题目数量
- 作答数量
- 用时（通过`getQuizDuration`函数计算）
- 答题时间（通过`formatDate`函数格式化）

#### 操作按钮
每个卡片右侧提供两个操作按钮：
- **查看详情**：跳转到详细结果页面
- **删除**：删除该条记录（带确认提示）

#### 展开/收起功能
通过`expandedQuiz`响应式变量控制卡片的展开状态，展开后显示：
- **题目得分分布**：展示每道题的得分情况
- **AI总体评价**：展示AI对答题的整体评价

这种设计的优势在于：
- 默认只显示概要信息，避免信息过载
- 用户可以按需展开查看详情
- 通过颜色编码直观展示分数等级

### 分页功能

为了处理大量历史记录，页面实现了分页功能：

- 使用`currentPage`和`pageSize`控制分页
- 通过`totalPages`计算属性确定总页数
- 通过`paginatedHistory`计算属性获取当前页的数据
- 提供上一页/下一页按钮，并在按钮不可用时禁用

这种设计确保了即使有大量历史记录，页面也能保持良好的性能和用户体验。

### 空状态处理

页面针对两种无数据情况提供了友好的用户体验：

1. **完全无历史记录**：显示引导用户开始答题的提示和按钮
2. **筛选后无结果**：显示提示用户调整筛选条件的信息和清除筛选按钮

这种设计避免了空白页面给用户带来的困惑，提供了明确的下一步操作指引。

### 核心响应式数据

页面使用了多个响应式变量管理UI状态：

- **filterBank**：当前选中的题库筛选
- **filterScore**：当前选中的分数筛选
- **sortBy**：当前排序方式
- **currentPage**：当前页码
- **pageSize**：每页显示数量
- **expandedQuiz**：当前展开的答题记录ID

### 核心计算属性

页面使用了多个计算属性处理数据：

- **totalQuizzes**：计算总答题次数
- **averageScore**：计算平均分数
- **totalQuestions**：计算总题目数
- **totalTime**：计算总用时并格式化
- **availableBanks**：获取所有题库名称（用于筛选）
- **filteredHistory**：根据筛选条件和排序方式处理数据
- **totalPages**：计算总页数
- **paginatedHistory**：获取当前页的数据

### 核心方法函数

页面实现了多个辅助方法：

#### 数据处理方法
- **getQuizDuration**：计算答题用时
- **getQuizDurationInMinutes**：计算答题用时（分钟）
- **formatDate**：格式化日期时间
- **getQuestionEvaluations**：获取题目评估结果

#### 样式计算方法
- **getScoreBadgeClass**：根据分数返回标签样式类
- **getScoreTextClass**：根据分数返回文字颜色类

#### 交互方法
- **viewResult**：查看详细结果
- **deleteQuiz**：删除答题记录
- **clearHistory**：清空所有历史
- **clearFilters**：清除筛选条件
- **toggleExpand**：切换卡片展开状态

### 设计理念与最佳实践

#### 1. 响应式设计
页面使用Tailwind CSS的响应式类，确保在不同设备上都有良好的显示效果。例如：
```html
<div class="grid grid-cols-1 md:grid-cols-4 gap-6">
```

#### 2. 计算属性优化
大量使用计算属性处理数据，避免在模板中进行复杂计算，提高性能和可维护性。

#### 3. 条件渲染
使用v-if和v-else-if进行条件渲染，确保只渲染必要的DOM元素。

#### 4. 用户体验优化
- 提供筛选和排序功能
- 实现分页功能
- 处理空状态
- 操作前进行确认
- 使用颜色编码区分不同状态

#### 5. 数据可视化
通过卡片、网格、颜色等视觉元素，将复杂的数据以直观的方式呈现给用户。

### 为什么这样设计

1. **自上而下的信息层级**：符合用户阅读习惯，先概览后详情
2. **卡片式布局**：清晰分隔不同记录，便于浏览和操作
3. **筛选和排序**：帮助用户在大量数据中快速找到所需信息
4. **展开/收起**：避免信息过载，让用户可以控制信息密度
5. **分页功能**：提高页面性能，避免一次加载过多数据
6. **空状态处理**：提供明确的用户指引，避免用户困惑
7. **颜色编码**：利用视觉元素快速传达信息（如分数等级）

这些设计决策共同构建了一个功能完善、用户友好的历史记录页面，既满足了数据展示的需求，又提供了良好的用户体验。